import e from"prettier";import{parsers as t}from"prettier/parser-babel";import{parsers as r}from"prettier/parser-typescript";import{parse as o}from"@babel/parser";import{file as n}from"@babel/types";import i from"@babel/generator";const s=e.getSupportInfo().languages.filter((({name:e})=>["JavaScript","JSX","TSX","TypeScript"].includes(e)));const a=/^\s*$/,p="/*DUMMY_COMMENT_BY_PRETTIER_PLUGIN_FORMAT*/";function l(e,t){const r=new Set;!function(e,{onVisit:t}){!function e(r){if(r&&"string"==typeof r.type){t(r);for(const t in r){const o=r[t];if(Array.isArray(o))for(let t=0;t<o.length;t++)e(o[t]);else e(o)}}}(e)}(t.program,{onVisit(e){if("TemplateLiteral"!==e.type)return;const t=e.loc?.start.line;if("number"!=typeof t)return;const o=e.loc?.end.line||t;for(let e=t;e<=o;e++)r.add(e)}});return e.split("\n").map(((e,t)=>{const o=!r.has(t+1);return a.test(e)&&o?p:e})).join("\n")}function c(e,t){try{const r=t.parser,s={sourceType:"module",plugins:"typescript"===r?["jsx","typescript"]:["jsx"]};let c=o(e,s);e=l(e,c),c=o(e,s),function(e){const t=function(e){let t="";for(const r of e.program.body)if("ImportDeclaration"===r.type&&"react-css-cx"===r.source.value)for(const e of r.specifiers)"ImportSpecifier"===e.type&&"Identifier"===e.imported.type&&"style"===e.imported.name&&(t=e.local.name||e.imported.name);return t||null}(e);if(!t)return null;const r=function(e,t){const r=[];for(const o of e.program.body)if("VariableDeclaration"===o.type)for(const e of o.declarations)"VariableDeclarator"===e.type&&"TaggedTemplateExpression"===e.init?.type&&"Identifier"===e.init.tag.type&&e.init.tag.name===t&&r.push(e.init.quasi);return r}(e,t);for(const e of r)for(let t=0;t<e.quasis.length;t++){const r=e.quasis[t];if("TemplateElement"!==r.type)continue;if(r.value.raw!==r.value.cooked){console.log("Unhandled case for code modification");continue}const o=[];let n=!0;const i=r.value.raw.split("\n");for(let e=0;e<i.length;e++){const t=i[e],r=a.test(t);if(0!==e&&e!==i.length-1||!r)if(r)o.push("");else for(const e of t.trim().replace(/\s+/g," ").split(" "))n=!1,o.push("  "+e)}if(n){r.value.raw=1===e.quasis.length?"":"\n";continue}const s=e.expressions.at(t);let p="";p+="\n",p+=o.join("\n"),p+="\n",s&&(p+="  "),r.value.raw=p}}(c);const m=n({type:"Program",body:c.program.body,directives:c.program.directives,sourceType:"module",sourceFile:c.program.sourceFile,leadingComments:c.program.leadingComments,innerComments:c.program.innerComments,trailingComments:c.program.trailingComments,start:null,end:null,loc:null});return function(e){return e.split("\n").map((e=>e===p?"":e)).join("\n")}(i(m).code)}catch(e){console.warn("PRETTIER PLUGIN FORMAT ERROR:",e)}}const m={babel:{...t.babel,preprocess:c},typescript:{...r.typescript,preprocess:c}},f={},u={};export{s as languages,f as options,m as parsers,u as defaultOptions};